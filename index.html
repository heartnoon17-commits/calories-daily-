<!doctype html>
<html lang="th" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calories Daily</title>

  <!-- ‚úÖ ‡∏à‡∏∏‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç 1: Tailwind CDN (‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô head) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Tailwind Config (‡πÇ‡∏ó‡∏ô‡∏™‡∏µ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û + Dark mode) -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            brand: {
              green: '#22c55e',
              blue: '#38bdf8',
              dark: '#0b1220',
            }
          },
          boxShadow: {
            soft: '0 10px 30px rgba(2, 132, 199, 0.12)',
          },
          keyframes: {
            floaty: { '0%,100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-4px)' } }
          },
          animation: {
            floaty: 'floaty 3s ease-in-out infinite'
          }
        }
      }
    }
  </script>

  <!-- ‚úÖ ‡∏à‡∏∏‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç 2: Chart.js CDN (‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô head) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <!-- ‚úÖ ‡∏à‡∏∏‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç 3: ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏ü‡∏•‡πå CSS -->
  <link rel="stylesheet" href="./style.css" />
</head>

<body class="h-full bg-slate-50 text-slate-800 dark:bg-slate-950 dark:text-slate-100 transition-colors">

  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/30 backdrop-blur-sm">
    <div class="rounded-2xl bg-white dark:bg-slate-900 p-6 shadow-soft w-[320px] text-center">
      <div class="mx-auto mb-3 h-10 w-10 rounded-full border-4 border-slate-200 dark:border-slate-700 border-t-brand-blue animate-spin"></div>
      <p class="font-semibold">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</p>
      <p class="text-sm text-slate-500 dark:text-slate-400">Calories Daily</p>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="fixed z-50 right-4 bottom-4 hidden max-w-sm rounded-xl px-4 py-3 shadow-soft bg-white dark:bg-slate-900 border border-slate-200/60 dark:border-slate-700/60">
    <div class="flex items-start gap-3">
      <div id="toastDot" class="mt-1.5 h-2.5 w-2.5 rounded-full bg-brand-green"></div>
      <div class="flex-1">
        <p id="toastTitle" class="font-semibold">‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</p>
        <p id="toastMsg" class="text-sm text-slate-500 dark:text-slate-400">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢</p>
      </div>
      <button id="toastClose" class="text-slate-400 hover:text-slate-700 dark:hover:text-slate-200">‚úï</button>
    </div>
  </div>

  <!-- Header -->
  <header class="sticky top-0 z-40 border-b border-slate-200/70 dark:border-slate-800/70 bg-white/70 dark:bg-slate-950/60 backdrop-blur">
    <div class="mx-auto max-w-6xl px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="h-10 w-10 rounded-2xl bg-gradient-to-br from-brand-green to-brand-blue shadow-soft animate-floaty"></div>
        <div>
          <h1 class="text-lg font-extrabold leading-tight">Calories Daily</h1>
          <p class="text-xs text-slate-500 dark:text-slate-400">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ‚Ä¢ ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤ ‚Ä¢ ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</p>
        </div>
      </div>

      <div class="flex items-center gap-2">
        <button id="btnTheme" class="btn-secondary">
          <span id="themeIcon">üåô</span>
          <span class="hidden sm:inline">Dark</span>
        </button>

        <div id="authArea" class="flex items-center gap-2">
          <button id="btnGoAuth" class="btn-primary">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
        </div>

        <div id="userArea" class="hidden items-center gap-2">
          <div class="hidden sm:flex flex-col items-end">
            <span id="userEmail" class="text-sm font-semibold"></span>
            <span id="userHint" class="text-xs text-slate-500 dark:text-slate-400">‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</span>
          </div>
          <button id="btnLogout" class="btn-secondary">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
        </div>
      </div>
    </div>
  </header>

  <!-- Main -->
  <main class="mx-auto max-w-6xl px-4 py-6">

    <!-- NAV (SPA) -->
    <div class="mb-6 grid grid-cols-2 sm:grid-cols-4 gap-3">
      <button data-route="dashboard" class="nav-pill active">‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</button>
      <button data-route="calc" class="nav-pill">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì BMR/TDEE</button>
      <button data-route="track" class="nav-pill">‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</button>
      <button data-route="foods" class="nav-pill">‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£</button>
    </div>

    <!-- AUTH VIEW -->
    <section id="viewAuth" class="view hidden">
      <div class="grid lg:grid-cols-2 gap-6">
        <div class="card">
          <h2 class="card-title">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h2>
          <p class="card-subtitle">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Calories Daily ‡∏î‡πâ‡∏ß‡∏¢‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>

          <div class="mt-5 space-y-3">
            <div>
              <label class="label">Email</label>
              <input id="signupEmail" class="input" type="email" placeholder="you@example.com" />
            </div>
            <div>
              <label class="label">Password</label>
              <input id="signupPass" class="input" type="password" placeholder="‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£" />
            </div>
            <button id="btnSignup" class="btn-primary w-full">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
          </div>
        </div>

        <div class="card">
          <h2 class="card-title">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
          <p class="card-subtitle">‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ñ‡∏∂‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>

          <div class="mt-5 space-y-3">
            <div>
              <label class="label">Email</label>
              <input id="loginEmail" class="input" type="email" placeholder="you@example.com" />
            </div>
            <div>
              <label class="label">Password</label>
              <input id="loginPass" class="input" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
            </div>
            <button id="btnLogin" class="btn-primary w-full">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
          </div>

          <div class="mt-4 rounded-xl border border-slate-200/70 dark:border-slate-800/70 p-4 bg-slate-50 dark:bg-slate-900/40">
            <p class="text-sm text-slate-600 dark:text-slate-300">
              ‚úÖ ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡∏°‡πà ‚Äú‡∏¢‡∏±‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏≠‡∏¢‡∏π‡πà‚Äù ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ Firebase Auth ‡∏°‡∏µ session ‡πÉ‡∏´‡πâ ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏≤‡∏°‡∏µ LocalStorage cache ‡∏ä‡πà‡∏ß‡∏¢‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- DASHBOARD VIEW -->
    <section id="viewDashboard" class="view">
      <div class="grid lg:grid-cols-3 gap-6">
        <div class="card lg:col-span-2">
          <div class="flex items-start justify-between gap-3">
            <div>
              <h2 class="card-title">‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h2>
              <p class="card-subtitle">‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£</p>
            </div>
            <div class="text-right">
              <p class="text-xs text-slate-500 dark:text-slate-400">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</p>
              <p id="todayStr" class="font-extrabold"></p>
            </div>
          </div>

          <div class="mt-5 grid sm:grid-cols-3 gap-3">
            <div class="stat">
              <p class="stat-label">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (kcal)</p>
              <p id="statTarget" class="stat-value">‚Äî</p>
              <p id="statGoalHint" class="stat-hint">‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ ‚Äú‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì BMR/TDEE‚Äù</p>
            </div>
            <div class="stat">
              <p class="stat-label">‡∏Å‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß (kcal)</p>
              <p id="statEaten" class="stat-value">0</p>
              <p class="stat-hint">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
            </div>
            <div class="stat">
              <p class="stat-label">‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (kcal)</p>
              <p id="statRemain" class="stat-value">‚Äî</p>
              <p class="stat-hint">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ - ‡∏Å‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß</p>
            </div>
          </div>

          <div class="mt-5">
            <div class="flex items-center justify-between mb-2">
              <p class="font-semibold">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</p>
              <p id="progressText" class="text-sm text-slate-500 dark:text-slate-400">0%</p>
            </div>
            <div class="h-3 w-full rounded-full bg-slate-200 dark:bg-slate-800 overflow-hidden">
              <div id="progressBar" class="h-full w-0 bg-gradient-to-r from-brand-green to-brand-blue transition-all"></div>
            </div>
          </div>

          <div class="mt-6 grid md:grid-cols-2 gap-6 items-center">
            <div>
              <h3 class="font-extrabold text-lg">Macros (‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì)</h3>
              <p class="text-sm text-slate-500 dark:text-slate-400">‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>

              <div class="mt-4 grid grid-cols-3 gap-3">
                <div class="mini-stat">
                  <p class="mini-label">‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô</p>
                  <p id="mProtein" class="mini-value">0g</p>
                </div>
                <div class="mini-stat">
                  <p class="mini-label">‡∏Ñ‡∏≤‡∏£‡πå‡∏ö</p>
                  <p id="mCarb" class="mini-value">0g</p>
                </div>
                <div class="mini-stat">
                  <p class="mini-label">‡πÑ‡∏Ç‡∏°‡∏±‡∏ô</p>
                  <p id="mFat" class="mini-value">0g</p>
                </div>
              </div>
            </div>

            <div class="rounded-2xl border border-slate-200/70 dark:border-slate-800/70 p-4 bg-white dark:bg-slate-900/40">
              <canvas id="macroChart" height="220"></canvas>
            </div>
          </div>
        </div>

        <div class="card">
          <h2 class="card-title">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå & ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</h2>
          <p class="card-subtitle">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô Firestore</p>

          <div class="mt-5 space-y-3">
            <div class="grid grid-cols-2 gap-3">
              <div class="mini-stat">
                <p class="mini-label">BMR</p>
                <p id="dashBmr" class="mini-value">‚Äî</p>
              </div>
              <div class="mini-stat">
                <p class="mini-label">TDEE</p>
                <p id="dashTdee" class="mini-value">‚Äî</p>
              </div>
            </div>

            <div id="goalBox" class="rounded-2xl p-4 border border-slate-200/70 dark:border-slate-800/70 bg-slate-50 dark:bg-slate-900/40">
              <p class="font-extrabold" id="goalTitle">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</p>
              <p class="text-sm text-slate-500 dark:text-slate-400" id="goalDesc">
                ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ ‚Äú‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì BMR/TDEE‚Äù ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (‡∏•‡∏î/‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏£‡∏±‡∏Å‡∏©‡∏≤)
              </p>
            </div>

            <button id="btnQuickToCalc" class="btn-primary w-full">‡πÑ‡∏õ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ BMR/TDEE</button>
          </div>
        </div>
      </div>
    </section>

    <!-- CALC VIEW -->
    <section id="viewCalc" class="view hidden">
      <div class="grid lg:grid-cols-3 gap-6">
        <div class="card lg:col-span-2">
          <h2 class="card-title">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì BMR ‡πÅ‡∏•‡∏∞ TDEE</h2>
          <p class="card-subtitle">‡∏™‡∏π‡∏ï‡∏£ Mifflin-St Jeor + ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</p>

          <div class="mt-5 grid sm:grid-cols-2 gap-4">
            <div>
              <label class="label">‡πÄ‡∏û‡∏®</label>
              <select id="gender" class="input">
                <option value="male">‡∏ä‡∏≤‡∏¢</option>
                <option value="female">‡∏´‡∏ç‡∏¥‡∏á</option>
              </select>
            </div>

            <div>
              <label class="label">‡∏≠‡∏≤‡∏¢‡∏∏ (‡∏õ‡∏µ)</label>
              <input id="age" class="input" type="number" min="1" placeholder="‡πÄ‡∏ä‡πà‡∏ô 20" />
            </div>

            <div>
              <label class="label">‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏π‡∏á (cm)</label>
              <input id="height" class="input" type="number" min="1" placeholder="‡πÄ‡∏ä‡πà‡∏ô 170" />
            </div>

            <div>
              <label class="label">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (kg)</label>
              <input id="weight" class="input" type="number" min="1" step="0.1" placeholder="‡πÄ‡∏ä‡πà‡∏ô 65" />
            </div>

            <div class="sm:col-span-2">
              <label class="label">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</label>
              <select id="activity" class="input">
                <option value="1.2">‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢ (1.2)</option>
                <option value="1.375">‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ (1.375)</option>
                <option value="1.55">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (1.55)</option>
                <option value="1.725">‡∏´‡∏ô‡∏±‡∏Å (1.725)</option>
              </select>
            </div>
          </div>

          <div class="mt-5 flex flex-col sm:flex-row gap-3">
            <button id="btnCalc" class="btn-primary">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
            <button id="btnSaveProfile" class="btn-secondary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</button>
          </div>

          <div class="mt-6 grid sm:grid-cols-2 gap-4">
            <div class="stat">
              <p class="stat-label">BMR (kcal/‡∏ß‡∏±‡∏ô)</p>
              <p id="outBmr" class="stat-value">‚Äî</p>
              <p class="stat-hint">‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏ó‡∏µ‡πà‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡πÉ‡∏ä‡πâ</p>
            </div>
            <div class="stat">
              <p class="stat-label">TDEE (kcal/‡∏ß‡∏±‡∏ô)</p>
              <p id="outTdee" class="stat-value">‚Äî</p>
              <p class="stat-hint">‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏ß‡∏°‡∏ï‡∏≤‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</p>
            </div>
          </div>
        </div>

        <div class="card">
          <h2 class="card-title">‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</h2>
          <p class="card-subtitle">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô‡∏à‡∏≤‡∏Å TDEE</p>

          <div class="mt-5 space-y-3">
            <label class="label">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</label>
            <select id="goalType" class="input">
              <option value="maintain">‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å</option>
              <option value="cut">‡∏•‡∏î‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å</option>
              <option value="bulk">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å</option>
            </select>

            <label class="label">‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà (kcal)</label>
            <select id="goalDelta" class="input">
              <option value="300">300</option>
              <option value="400">400</option>
              <option value="500">500</option>
            </select>

            <button id="btnApplyGoal" class="btn-primary w-full">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</button>
            <button id="btnSaveGoal" class="btn-secondary w-full">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</button>

            <div id="goalPreview" class="rounded-2xl p-4 border border-slate-200/70 dark:border-slate-800/70 bg-slate-50 dark:bg-slate-900/40">
              <p class="font-extrabold" id="goalPreviewTitle">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</p>
              <p class="text-sm text-slate-500 dark:text-slate-400" id="goalPreviewDesc">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì TDEE ‡∏Å‡πà‡∏≠‡∏ô</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- TRACK VIEW -->
    <section id="viewTrack" class="view hidden">
      <div class="grid lg:grid-cols-3 gap-6">
        <div class="card lg:col-span-2">
          <div class="flex items-start justify-between gap-3">
            <div>
              <h2 class="card-title">‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</h2>
              <p class="card-subtitle">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Firestore ‡∏ï‡∏≤‡∏° user + ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</p>
            </div>
            <button id="btnReloadToday" class="btn-secondary">‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä</button>
          </div>

          <div class="mt-5 grid sm:grid-cols-2 gap-4">
            <div>
              <label class="label">‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏´‡∏≤‡∏£</label>
              <input id="foodName" class="input" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏≠‡∏Å‡πÑ‡∏Å‡πà‡∏¢‡πà‡∏≤‡∏á" />
            </div>
            <div>
              <label class="label">‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà (kcal)</label>
              <input id="foodCal" class="input" type="number" min="0" placeholder="‡πÄ‡∏ä‡πà‡∏ô 250" />
            </div>

            <div>
              <label class="label">‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô (g)</label>
              <input id="foodP" class="input" type="number" min="0" step="0.1" placeholder="‡πÄ‡∏ä‡πà‡∏ô 30" />
            </div>
            <div>
              <label class="label">‡∏Ñ‡∏≤‡∏£‡πå‡∏ö (g)</label>
              <input id="foodC" class="input" type="number" min="0" step="0.1" placeholder="‡πÄ‡∏ä‡πà‡∏ô 10" />
            </div>

            <div class="sm:col-span-2">
              <label class="label">‡πÑ‡∏Ç‡∏°‡∏±‡∏ô (g)</label>
              <input id="foodF" class="input" type="number" min="0" step="0.1" placeholder="‡πÄ‡∏ä‡πà‡∏ô 8" />
            </div>
          </div>

          <div class="mt-5 flex flex-col sm:flex-row gap-3">
            <button id="btnAddFood" class="btn-primary">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
            <button id="btnClearToday" class="btn-danger">‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</button>
          </div>

          <div class="mt-6">
            <h3 class="font-extrabold text-lg">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h3>
            <div id="todayList" class="mt-3 space-y-3"></div>
          </div>
        </div>

        <div class="card">
          <h2 class="card-title">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h2>
          <p class="card-subtitle">Progress ‡∏à‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å Target kcal</p>

          <div class="mt-5 space-y-4">
            <div class="stat">
              <p class="stat-label">Target (kcal)</p>
              <p id="trackTarget" class="stat-value">‚Äî</p>
              <p class="stat-hint">‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ BMR/TDEE</p>
            </div>
            <div class="stat">
              <p class="stat-label">‡∏£‡∏ß‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ (kcal)</p>
              <p id="trackTotal" class="stat-value">0</p>
              <p class="stat-hint">‡∏£‡∏ß‡∏°‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£</p>
            </div>

            <div>
              <div class="flex items-center justify-between mb-2">
                <p class="font-semibold">Progress</p>
                <p id="trackProgressText" class="text-sm text-slate-500 dark:text-slate-400">0%</p>
              </div>
              <div class="h-3 w-full rounded-full bg-slate-200 dark:bg-slate-800 overflow-hidden">
                <div id="trackProgressBar" class="h-full w-0 bg-gradient-to-r from-brand-green to-brand-blue transition-all"></div>
              </div>
            </div>

            <div class="rounded-2xl border border-slate-200/70 dark:border-slate-800/70 p-4 bg-slate-50 dark:bg-slate-900/40">
              <p class="font-extrabold">‡∏ó‡∏¥‡∏õ‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°</p>
              <p class="text-sm text-slate-600 dark:text-slate-300 mt-1">
                ‡πÉ‡∏ä‡πâ ‚Äú‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£‚Äù ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏≥‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FOODS VIEW -->
    <section id="viewFoods" class="view hidden">
      <div class="grid lg:grid-cols-3 gap-6">
        <div class="card lg:col-span-2">
          <div class="flex items-start justify-between gap-3">
            <div>
              <h2 class="card-title">‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å</h2>
              <p class="card-subtitle">‡πÅ‡∏ö‡πà‡∏á‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà + ‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì + ‡∏°‡∏µ ‚Äú‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π 1 ‡∏ß‡∏±‡∏ô‚Äù</p>
            </div>
            <button id="btnRandomDay" class="btn-primary">‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π 1 ‡∏ß‡∏±‡∏ô</button>
          </div>

          <div class="mt-4">
            <input id="foodSearch" class="input" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô ‡∏Ç‡πâ‡∏≤‡∏ß‡∏°‡∏±‡∏ô‡πÑ‡∏Å‡πà / ‡πÑ‡∏Ç‡πà / salmon ..." />
          </div>

          <div id="foodCatalog" class="mt-5 space-y-5"></div>
        </div> <div id="foodCatalog" class="mt-5 space-y-5"></div>
        <!-- Photo to Calories (MVP) -->
<div class="mt-6 rounded-2xl border border-slate-200/70 dark:border-slate-800/70 p-4 bg-white dark:bg-slate-900/40">
  <div class="flex items-center justify-between gap-3">
    <div>
      <p class="font-extrabold">‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‚Üí ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà</p>
      <p class="text-sm text-slate-500 dark:text-slate-400">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π + ‡∏Ç‡∏ô‡∏≤‡∏î (S/M/L)</p>
    </div>

    <input id="foodPhotoInput" type="file" accept="image/*" capture="environment" class="hidden" />
    <button id="btnPickPhoto" class="btn-secondary">‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ/‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ</button>
  </div>

  <div id="photoPreviewWrap" class="mt-4 hidden">
    <img id="foodPhotoPreview"
         class="w-full max-h-64 object-cover rounded-xl border border-slate-200/70 dark:border-slate-800/70" />
  </div>

  <div id="photoResultWrap" class="mt-4 hidden">
    <p class="font-extrabold mb-2">‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ</p>
    <div id="photoCandidates" class="grid sm:grid-cols-2 gap-3"></div>
  </div>
</div>


<!-- ‚úÖ ‡∏ß‡∏≤‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ (‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏´‡∏ç‡πà‡πÉ‡∏ö‡πÅ‡∏£‡∏Å) -->
<div class="mt-6 rounded-2xl border border-slate-200/70 dark:border-slate-800/70 p-4 bg-white dark:bg-slate-900/40">
  <div class="flex items-center justify-between gap-3">
    <div>
      <p class="font-extrabold">‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‚Üí ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà</p>
      <p class="text-sm text-slate-500 dark:text-slate-400">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÄ‡∏î‡∏≤‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡πâ ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î</p>
    </div>
    <input id="foodPhotoInput" type="file" accept="image/*" capture="environment" class="hidden" />
    <button id="btnPickPhoto" class="btn-secondary">‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ/‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ</button>
  </div>

  <div id="photoPreviewWrap" class="mt-4 hidden">
    <img id="foodPhotoPreview" class="w-full max-h-64 object-cover rounded-xl border border-slate-200/70 dark:border-slate-800/70" />
  </div>

  <div id="photoResultWrap" class="mt-4 hidden">
    <p class="font-extrabold mb-2">‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏ß‡πà‡∏≤‡πÉ‡∏ä‡πà</p>
    <div id="photoCandidates" class="grid sm:grid-cols-2 gap-3"></div>
  </div>
</div>

</div> <!-- ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏´‡∏ç‡πà‡πÉ‡∏ö‡πÅ‡∏£‡∏Å -->


        <div class="card">
          <h2 class="card-title">‡πÄ‡∏°‡∏ô‡∏π‡∏™‡∏∏‡πà‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h2>
          <p class="card-subtitle">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠/‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡πÑ‡∏õ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÑ‡∏î‡πâ</p>

          <div id="randomBox" class="mt-5 space-y-3"></div>

          <div class="mt-4 rounded-2xl border border-slate-200/70 dark:border-slate-800/70 p-4 bg-slate-50 dark:bg-slate-900/40">
            <p class="text-sm text-slate-600 dark:text-slate-300">
              * ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‚Äù ‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏£‡∏∏‡∏á
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Not logged in banner -->
    <div id="mustLogin" class="hidden mt-6 rounded-2xl border border-slate-200/70 dark:border-slate-800/70 p-4 bg-white dark:bg-slate-900/40">
      <p class="font-extrabold">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</p>
      <p class="text-sm text-slate-600 dark:text-slate-300">‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á Firestore ‡πÅ‡∏•‡∏∞‡∏ã‡∏¥‡∏á‡∏Å‡πå‡∏Ç‡πâ‡∏≤‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</p>
      <button id="btnGoAuth2" class="btn-primary mt-3">‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
    </div>

  </main>

  <!-- ‚úÖ ‡∏à‡∏∏‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç 4: ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå JS ‡πÅ‡∏ö‡∏ö module (‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏¥‡∏î body) -->
  <script type="module" src="./firebase.js"></script>
  <script type="module" src="./app.js"></script>
</body>
</html>
